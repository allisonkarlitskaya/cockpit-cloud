---
apiVersion: v1
kind: List
items:
- kind: Pod
  apiVersion: v1
  metadata:
    name: cockpit-cloud-@INSTANCE@
    namespace: front-door-ci
    labels:
      infra: cockpit-cloud
  spec:
    containers:
      - name: cockpit-cloud
        image: @IMAGE@
        ports:
          - name: session
            containerPort: 8080
          - name: cockpit
            containerPort: 9090

- kind: Service
  apiVersion: v1
  metadata:
    name: cockpit-cloud-service
  spec:
    ports:
    - name: session
      targetPort: 8080
      port: 8080
      protocol: TCP
    - name: cockpit
      targetPort: 9090
      port: 9090
      protocol: TCP
    selector:
      infra: cockpit-cloud

- kind: Route
  apiVersion: route.openshift.io/v1
  metadata:
    name: cockpit-cloud-session-@INSTANCE@
  spec:
    to:
      kind: Service
      name: cockpit-cloud-service
    port:
      targetPort: 8080
    tls:
      termination: passthrough

- kind: Route
  apiVersion: route.openshift.io/v1
  metadata:
    name: cockpit-cloud-@INSTANCE@
  spec:
    to:
      kind: Service
      name: cockpit-cloud-service
    port:
      targetPort: 9090
    tls:
      termination: edge
